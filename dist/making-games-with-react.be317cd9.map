{"version":3,"sources":["index.js"],"names":["init","playerElement","document","createElement","style","background","position","width","height","boxElement1","boxElement2","appElement","querySelector","appendChild","Player","element","x","y","w","h","velocity","limit","acceleration","friction","state","keys","collidesLeft","collidesLeftWith","collidesRight","collidesRightWith","collidesUp","collidesUpWith","collidesDown","collidesDownWith","gamepad","gamepads","navigator","getGamepads","webkitGetGamepads","gp","maxThrottle","ax","Math","abs","axes","forEach","axIndex","console","log","max","min","left","top","player","window","innerWidth","innerHeight","Box","box1","box2","clicks","mouse","listen","addEventListener","e","code","collide","objects","undefined","object","animate","requestAnimationFrame","Window"],"mappings":"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","file":"making-games-with-react.be317cd9.map","sourceRoot":"..","sourcesContent":["const init = () => {\n  const playerElement = document.createElement('div')\n  playerElement.style.background = 'red'\n  playerElement.style.position = 'absolute'\n  playerElement.style.width = '64px'\n  playerElement.style.height = '64px'\n  // playerElement.style.borderRadius = '100%'\n\n  const boxElement1 = document.createElement(\"div\")\n  boxElement1.style.background = \"green\"\n  boxElement1.style.position = \"absolute\"\n  boxElement1.style.width = \"64px\"\n  boxElement1.style.height = \"64px\"\n  // boxElement1.style.borderRadius = \"100%\"\n\n  const boxElement2 = document.createElement(\"div\")\n  boxElement2.style.background = \"darkgreen\"\n  boxElement2.style.position = \"absolute\"\n  boxElement2.style.width = \"64px\"\n  boxElement2.style.height = \"64px\"\n  // boxElement2.style.borderRadius = \"100%\"\n\n  const appElement = document.querySelector('.app')\n  appElement.appendChild(playerElement)\n  appElement.appendChild(boxElement1)\n  appElement.appendChild(boxElement2)\n\n  return {\n    playerElement,\n    appElement,\n    boxElement1,\n    boxElement2\n  }\n}\nconst {playerElement, boxElement1, boxElement2} = init()\n\nclass Player {\n  constructor(element, x, y,  w, h) {\n    this.element = element\n    this.x = x\n    this.y = y\n    // this.r = r\n    this.w = w\n    this.h = h\n\n    this.velocity = {\n      x: 0,\n      y: 0\n    }\n\n    this.limit = {\n      x: 12,\n      y: 12\n    }\n\n    this.acceleration = {\n      x: 2,\n      y: 2\n    }\n\n    this.friction = {\n      x: 0.75,\n      y: 0.75\n    }\n  }\n\n  animate (state) {\n    const {\n      keys,\n      collidesLeft,\n      collidesLeftWith,\n      collidesRight,\n      collidesRightWith,\n      collidesUp,\n      collidesUpWith,\n      collidesDown,\n      collidesDownWith,\n      gamepad\n    } = state\n\n    let gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads : []);\n    if (!gamepads) {\n      return;\n    }\n\n    let gp = gamepads[0];\n\n    let maxThrottle = (ax) => {\n      return Math.abs(ax) === 1\n    }\n\n    gp.axes.forEach((ax, axIndex) => {\n      if (ax != 0) {\n        console.log(ax, axIndex);\n        if (axIndex === 4|| axIndex === 0 || axIndex === 2) {\n          //x\n          if (ax > 0) {\n            if (Math.abs(ax) < 1) {\n              this.velocity.x = this.limit.x * ax\n            } else {\n              this.velocity.x = Math.max(\n                this.velocity.x - this.acceleration.x * ax,\n                this.limit.x * (ax / Math.abs(ax))\n              )\n            }\n          } else {\n            if (Math.abs(ax) < 1) {\n              this.velocity.x = this.limit.x * ax\n            } else {\n\n              this.velocity.x = Math.min(\n                this.velocity.x + this.acceleration.x * ax,\n                this.limit.x * (ax / Math.abs(ax))\n              )\n            }\n          }\n        }\n        if (axIndex === 5 || axIndex === 1 || axIndex === 3 ) {\n          //y\n          if (ax < 0) {\n            if (Math.abs(ax) < 1) {\n              this.velocity.y = this.limit.y * ax\n            } else {\n              this.velocity.y = Math.min(\n                this.velocity.y + this.acceleration.y,\n                this.limit.y * -1\n              )\n\n            }\n          } else {\n            if (Math.abs(ax) < 1) {\n              this.velocity.y = this.limit.y * ax\n\n            } else {\n              this.velocity.y = Math.max(\n                this.velocity.y - this.acceleration.y,\n                this.limit.y * 1\n              )\n            }\n          }\n        }\n      }\n    })\n\n\n    if (keys['ArrowLeft'] && keys['ArrowRight']) {\n      //do nothing\n    }\n    else if (state.keys['ArrowLeft']) {\n      this.velocity.x = Math.max(\n        this.velocity.x - this.acceleration.x,\n        this.limit.x * -1\n      )\n    }\n    else if (state.keys['ArrowRight']) {\n      this.velocity.x = Math.min(\n        this.velocity.x + this.acceleration.x,\n        this.limit.x * 1\n      )\n    }\n\n    if (keys['ArrowUp'] && keys['ArrowDown']) {\n      //do nothing\n    }\n    else if (state.keys['ArrowUp']) {\n      this.velocity.y = Math.min(\n        this.velocity.y + this.acceleration.y,\n        this.limit.y * -1\n      )\n    }\n    else if (state.keys['ArrowDown']) {\n      this.velocity.y = Math.max(\n        this.velocity.y - this.acceleration.y,\n        this.limit.y * 1\n      )\n    }\n    if (\n        this.velocity.x < 0 && collidesLeft\n        || this.velocity.x > 0 && collidesRight\n    ) {\n        if (\n            collidesLeftWith && this.y <= collidesLeftWith.y\n            || collidesRightWith && this.y <= collidesRightWith.y\n        ) {\n            this.velocity.y -= this.friction.y\n        } else {\n            this.velocity.y += this.friction.y\n        }\n    }\n    else {\n      this.velocity.x *= this.friction.x\n      this.x += this.velocity.x\n    }\n\n    if (\n        this.velocity.y < 0 && collidesUp\n        || this.velocity.y > 0 && collidesDown\n    ) {\n        if (\n            collidesUpWith && this.x <= collidesUpWith.x\n            || collidesDownWith && this.x <= collidesDownWith.x\n        ) {\n            this.velocity.x -= this.friction.x\n        } else {\n            this.velocity.x += this.friction.x\n        }\n    }\n    else {\n      this.velocity.y *= this.friction.y\n      this.y += this.velocity.y\n    }\n\n    this.element.style.left = this.x + \"px\"\n    this.element.style.top = this.y + \"px\"\n  }\n}\n\nconst player = new Player(\n  playerElement,\n  window.innerWidth / 2,\n  window.innerHeight / 2,\n  64,\n  64\n)\n\nclass Box {\n  constructor(element, x, y, w, h) {\n    this.element = element\n    this.x = x\n    this.y = y\n    // this.r = r\n    this.w = w\n    this.h = h\n  }\n\n  animate(state) {\n    this.element.style.left = this.x + \"px\"\n    this.element.style.top = this.y + \"px\"\n  }\n}\n\nconst box1 = new Box(\n  boxElement1,\n  100,\n  (window.innerHeight / 2) - 32,\n  64,\n  64\n)\n\nconst box2 = new Box(\n  boxElement2,\n  window.innerWidth - 100,\n  (window.innerHeight / 2) + 32,\n  64,\n  64\n)\n\nconst state = {\n  clicks: {},\n  keys: {},\n  mouse: {}\n}\n\nconst listen = () => {\n  window.addEventListener('gamepadconnected', e => {\n    console.log('gamepad connected', e)\n    state.gamepad = e.gamepad\n    console.log(e.gamepad)\n  })\n  window.addEventListener(\"keydown\", e => {\n    console.log('keydown', e.code)\n    state.keys[e.code] = true\n  })\n  window.addEventListener(\"keyup\", e => {\n    state.keys[e.code] = false\n    console.log('keyup', e.code)\n  })\n\n}\n\nlisten()\n\nconst collide = state => {\n    const { player, objects } = state\n\n    state.collidesLeft = false\n    state.collidesLeftWith = undefined\n\n    state.collidesRight = false\n    state.collidesRightWith = undefined\n\n    state.collidesUp = false\n    state.collidesUpWith = undefined\n\n    state.collidesDown = false\n    state.collidesDownWith = undefined\n\n    objects.forEach(object => {\n        // const delta = {\n        //     x: player.x - object.x,\n        //     y: player.y - object.y,\n        // }\n        //\n        // const distance = Math.sqrt(\n        //     delta.x * delta.x + delta.y * delta.y\n        // )\n        //\n        // if (distance < player.r + object.r) {\n      if (\n          player.x < (object.x + object.w)\n          && (player.x + player.w) > object.x\n          && player.y < (object.y + object.h)\n          && (player.y + player.h) > object.y\n      ) {\n            if (player.velocity.x < 0 && object.x <= player.x) {\n                state.collidesLeft = true\n                state.collidesLeftWith = object\n            }\n\n            if (player.velocity.x > 0 && object.x >= player.x) {\n                state.collidesRight = true\n                state.collidesRightWith = object\n            }\n\n            if (player.velocity.y < 0 && object.y <= player.y) {\n                state.collidesUp = true\n                state.collidesUpWith = object\n            }\n\n            if (player.velocity.y > 0 && object.y >= player.y) {\n                state.collidesDown = true\n                state.collidesDownWith = object\n            }\n        }\n    })\n}\n\nstate.player = player\nstate.objects = [\n  box1,\n  box2\n]\n\nconst animate = () => {\n  requestAnimationFrame(animate)\n\n  collide(state)\n\n  player.animate(state)\n  box1.animate(state)\n  box2.animate(state)\n}\n\nWindow.state = state\n\nanimate()"]}